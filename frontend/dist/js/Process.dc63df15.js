(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Process"],{1977:function(t,e,r){},9158:function(t,e,r){"use strict";r("1977")},da71:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"process"},[r("h1",[t._v("Gestione processi")]),r("ProcessControl",{on:{setInterval:t.motorIntervalSet}})],1)},o=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"process-control"},[r("h2",[t._v("Gestione processo")]),t.error?r("div",{staticClass:"error-text"},[t._v(t._s(t.error))]):t._e(),"working"!=t.motorStatus?r("form",[r("button",{attrs:{type:"button"},on:{click:t.submit}},[t._v("Start")])]):t._e(),"working"==t.motorStatus?r("button",{on:{click:t.stopProcess}},[t._v(" Stop ")]):t._e(),r("h4",[t._v("Stato motore: "+t._s(t.motorStatus))])])},a=[],c=r("1da1"),u=(r("96cf"),r("d3b7"),{name:"ProcessControl",data:function(){return{degrees:0,error:"",statusRequest:null,motorStatus:""}},methods:{stopProcess:function(){var t=this;fetch("/api/stop-process",{method:"POST",headers:{"Content-Type":"application/json"}}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.ok){t.next=5;break}return t.next=3,e.text();case 3:throw r=t.sent,Error(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){t.error=e}))},submit:function(){var t=this;fetch("/api/processes",{method:"POST",headers:{"Content-Type":"application/json"}}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.ok){t.next=5;break}return t.next=3,e.text();case 3:throw r=t.sent,Error(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){t.error=e}))},requestStatus:function(){var t=this;fetch("/api/machine-status").then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.ok){t.next=5;break}return t.next=3,e.text();case 3:throw r=t.sent,Error(r);case 5:return t.abrupt("return",e.json());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(e){t.motorStatus=e["value"]})).catch((function(e){t.error=e}))}},mounted:function(){this.statusRequest=setInterval(this.requestStatus,1e3),this.$emit("setInterval",this.statusRequest)},unmounted:function(){console.log("ProcessControl Clearing statusRequest"),clearInterval(this.statusRequest)}}),i=u,l=(r("9158"),r("2877")),h=Object(l["a"])(i,s,a,!1,null,"0729f440",null),p=h.exports,f={name:"Process",data:function(){return{motorIntervalId:""}},components:{ProcessControl:p},methods:{motorIntervalSet:function(t){this.motorIntervalId=t}},beforeRouteLeave:function(t,e,r){console.log("ProcessView Clearing statusRequest"),clearInterval(this.motorIntervalId),r()}},m=f,v=Object(l["a"])(m,n,o,!1,null,null,null);e["default"]=v.exports}}]);
//# sourceMappingURL=Process.dc63df15.js.map